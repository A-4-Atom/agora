<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head'); %>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary fixed-top" id="mainNav">
            <%- include('./partials/adminMenu'); %> 
        </nav>

        <!-- About Section-->
       
        <section class="page-section-top-padded mb-0" id="about">
            <div class="container navbar-interior font-weight-bold text-primary">
                
                <%- include('../partials/welcome'); %>
            </div>

            <div class="container">
                
                <h3 class="text-secondary">Workspaces</h3>
                
                <div class="divider-custom">
                </div>

                
                <div class="text-left mt-4">
                    <div id="story1" class="row justify-content-left">

                        <div class="col-lg-3">
                            <a class="btn btn-primary" href="/a/workspace/0" >Create a Workspace</a>
                            <hr />
                            <h4 class="text-secondary">Your Workspaces:</h4>
                            
                            <%
                            if(ownerWorkspaces && ownerWorkspaces.length > 0) {
                                for(let i=0; i < ownerWorkspaces.length; i++) {
                                    if(ownerWorkspaces[i].active) {
                                        %>
                                        <a class="text-primary" href="/a/workspace/<%- ownerWorkspaces[i].id %>" ><%- ownerWorkspaces[i].workspaceName %></a>
                                        <br />
                                        <%
                                    }
                                    else {
                                        %>
                                        <span style="color: red;">{Inactive}
                                        <a class="text-primary" href="/a/workspace/<%- ownerWorkspaces[i].id %>" ><%- ownerWorkspaces[i].workspaceName %></a></span>
                                        <br />
                                        <%
                                    }
                                }
                            }
                            %>
                            
                            
                        </div>
                        <div class="col-lg-9">
                            
                            
                            <section>

                                <h4 class="text-secondary">Workspace</h4>

                                <% if(!!locals.message){ %>
                                    <div class="alert-message alert-message-warning" role="alert">
                                        <h3 ><%= message %></h3>
                                        <p><%= message2 %></p>
                                    </div>
                                <% } 
                                
                                if(workspace) {
                                    %>
                                    <form action="/a/workspace" id="workspaceForm" enctype="multipart/form-data" method="POST">
                                        <div class="form-group">
                                            <input type="hidden" name="workspaceId" value="<%- workspace.workspaceId %>" />
                                            Version: <input type="input" class="form-control form-control-lg" name="workspaceVersion" value="<%- workspace.workspaceVersion %>" id="workspaceVersion" placeholder="Version" disabled>
                                            Name: <input type="input" class="form-control form-control-lg" name="workspaceName" value="<%- workspace.workspaceName %>" id="workspaceName" placeholder="Name" required>
                                            Desciption: <input type="input" class="form-control form-control-lg" name="workspaceDescription" value="<%- workspace.workspaceDescription %>" id="workspaceDescription" placeholder="Description">
                                            Image: <img class="img-supersmall" src="<%= process.env.WORKSPACE_IMAGE_WEB_PATH%><%- workspace.workspaceImage %>" />
                                            <div class="mb-2">
                                                <label for="formFile" class="form-label">Upload an image for this workspace (1MB Max size)</label>
                                                <input class="form-control btn-secondary" accept="image/jpeg,image/jpg,image/png" type="file" id="formFile" value="<%- workspace.workspaceImage %>" name="workspaceImage">
                                            </div>
                                            Active: <input type="checkbox" class="" id="workspaceActive" name="workspaceActive" <%- (workspace.active)?'checked':'' %> /><br />
                                            Completable: <input type="checkbox" class="" id="workspaceCompletable" name="workspaceCompletable" <%- (workspace.completable)?'checked':'' %> />
                                            <br />
                                            <br />
                                            
                                            <%- include('./partials/pathway') %>
                                        </div>
                                        <button type="submit" id="workspaceButton" class="btn btn-primary btn-lg btn-block">Save Information</button>
                                        <br />
                                    </form>
                                    <%
                                }
                                
                                %>

                            </section>

                        </div>
                        
                    </div>
                </div>
            </div>



        </section>

        <!-- Footer-->
        <footer class="footer text-center">
            <%- include('../partials/footer'); %>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <%- include('../partials/copyright'); %>
        </div>
        <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
        <div class="scroll-to-top d-lg-none position-fixed">
            <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
        </div>
        <%- include('../partials/jsincludes'); %>
    </body>
</html>
<div class="modal fade" id="create-goal-modal" tabindex="-1" role="dialog" aria-labelledby="create-goal-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="create-goal-modal-label">Goal</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          
        </div>
        <div class="modal-body">
            
            <section>
                <hr />
                <%
                
                if(goal) {
                    %>
                    <form action="/dashboard/goal" id="goalForm" enctype="multipart/form-data" method="POST"> <!-- enctype="application/json" enctype="multipart/form-data"-->
                        <div class="form-group">
                            <input type="hidden" name="goalId" id="goalId" value="<%- goal.id %>" />
                            <input type="hidden" name="goalModified" id="goalModified" value="false" />

                            <div class="form-row">
                                <div class="col-sm-2 my-1">
                                    <!-- Image -->

                                    <div class="drop-zone">
                                        <span class="drop-zone__prompt">Drop file here or click to upload</span>
                                        <input type="file" name="goalImageField" class="drop-zone__input" />
                                    </div>

                                </div>
                                <div class="col my-1">
                                    <div class="row">
                                        <div class="col">
                                            <!-- Type -->
                                            <select name="goalType" id="goalType" class="form-control form-control-lg">
                                                <%
                                                if(goal.goalType === 1) {
                                                    %>
                                                    <option value="1" selected>Editor</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="1">Editor</option>
                                                    <%
                                                }
                                                %>
                                                <%
                                                if(goal.goalType === 2) {
                                                    %>
                                                    <option value="2" selected>Link Only</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="2">Link Only</option>
                                                    <%
                                                }
                                                %>
                                                <%
                                                if(goal.goalType === 3) {
                                                    %>
                                                    <option value="3" selected>Embed HTML (Including iFrames)</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="3">Embed HTML (Including iFrames)</option>
                                                    <%
                                                }
                                                %>
                                            </select>
                                        </div>
                                        <div class="col">
                                            <!-- Visibility -->
                                            <select name="goalVisibility" id="goalVisibility" class="form-control form-control-lg">
                                                <%
                                                if(goal.visibility === 0) {
                                                    %>
                                                    <option value="0" selected>Private</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="0">Private</option>
                                                    <%
                                                }
                                                %>
                                                <%
                                                if(goal.visibility === 1) {
                                                    %>
                                                    <option value="1" selected>Shared</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="1">Shared</option>
                                                    <%
                                                }
                                                %>
                                                <%
                                                if(goal.visibility === 2) {
                                                    %>
                                                    <option value="2" selected>Public</option>
                                                    <%
                                                }
                                                else {
                                                    %>
                                                    <option value="2">Public</option>
                                                    <%
                                                }
                                                %>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col">
                                           &nbsp; <input type="input" class="form-control form-control-lg" name="goalName" value="<%- goal.goalName %>" id="goalName" placeholder="Title" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="additionalMetadataHeader">
                                <svg class="centered" id="expansionArrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="IconChangeColor" height="24" width="24"><path d="M19,20H5a1,1,0,0,0,0,2H19a1,1,0,0,0,0-2Zm-7.71-2.29a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,14.59V3a1,1,0,0,0-2,0V14.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z" id="mainIconPathAttribute" stroke-width="1.1" stroke="#000000" fill="#000000" filter="url(#shadow)"></path><filter id="shadow"><feDropShadow id="shadowValue" stdDeviation=".5" dx="0" dy="0" flood-color="black"></feDropShadow></filter></svg>
                                <svg class="centered" id="expansionArrowUp" style="display:none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" transform="rotate(180)"><path d="M19,20H5a1,1,0,0,0,0,2H19a1,1,0,0,0,0-2Zm-7.71-2.29a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l4-4a1,1,0,0,0-1.42-1.42L13,14.59V3a1,1,0,0,0-2,0V14.59l-2.29-2.3a1,1,0,1,0-1.42,1.42Z" stroke-width="1.1" stroke="#000000" fill="#000000" filter="url(#shadow2)"></path><filter id="shadow2"><feDropShadow stdDeviation=".5" dx="0" dy="0" flood-color="black"></feDropShadow></filter></svg>

                            </div>
                            
                            <!-- Additional Goal metadata - Description / Requried / Active - Hidden by default -->
                            <div id="additionalMetadata" style="display:none">
                                <div class="row">
                                    <div class="col-auto">
                                        <div class="row">
                                            <div class="col">
                                                Completable: <input type="checkbox" class="" id="goalCompletable" name="goalCompletable" <%- (goal.completable)?'checked':'' %> />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                Active: <input type="checkbox" class="" id="goalActive" name="goalActive" <%- (goal.active)?'checked':'' %> />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                Version: <input type="input" class="form-control form-control-lg" name="goalVersion" value="<%- goal.goalVersion %>" id="goalVersion" placeholder="Version" disabled>
                                            </div>
                                        </div>
                                        
                                    
                                    </div>
                                    <div class="col">
                                        <textarea class="form-control form-control-lg" name="goalDescription" value="<%- goal.goalDescription %>" id="goalDescription" placeholder="Description"></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <br />
                            <br />
                            
                            <%- include('./edit-goal-pathway') %>

                        </div>
                        <button type="submit" id="goalButton" class="btn btn-primary btn-lg float-left">Save Goal</button>
                        <button type="button" class="btn btn-secondary btn-lg float-sm-right" data-dismiss="modal">Cancel</button>
                    </form>
                    <%
                }
                
                %>

            </section>

        </div>
        <div class="modal-footer">
          
        </div>
      </div>
    </div>
</div>
<!DOCTYPE html>
<html lang="en">

    <head>
        <%- include('../../../partials/head'); %>
    </head>

    <body>
        <div class="note-body">

            <%- include('../../side-menu/side-menu.ejs');%>  

            <div class="header-div">
                <!--Page Header-->
                <div class="header" id="new-note">
                    <input class="placeholder" id="note-placeholder" type="text" placeholder="Untitled">
                </div>
                <div class="header" id="new-tag">
                    <label>Tags:</label>
                    <input class="placeholder" id="tag-placeholder" type="text" placeholder="start typing...">
                </div>
                <!--Suggestions-->
                <span id="suggestion" class="material-symbols-outlined">
                    tips_and_updates
                </span>
                <!--More Options-->
                <i id="ellipsis" class="fa fa-ellipsis-h" onclick="toggleMoreOptions()"></i>
            </div>

            <!--Side Bar-->
            <div class="right-chevron" id="chevron">
                <div class="hide-tools">
                    <span id="right-chevron" class="material-symbols-outlined">
                        chevron_right
                    </span>
                </div>
            </div>
            <div id="tools">
                <div class="show-tools">
                    <span id="left-chevron" class="material-symbols-outlined">
                        chevron_left
                    </span>
                </div>
                <div id="tools-container">
                    <span id="add-note" class="material-symbols-outlined">
                        edit_note
                    </span>
                    <span class="material-symbols-outlined">
                        image
                    </span>
                    <span class="material-symbols-outlined">
                        file_upload
                    </span>
                    <!--File Dropdown-->
                    <span id="show-files" class="material-symbols-outlined" onclick="toggleFileModal()">folder_open</span>
                </div>
            </div>
            <div class="hidden" id="file-display">
                <%- include('./file-display'); %>
            </div>
    
            <!--Note Editor-->
            <div id="note-div">
                <div class="note-container">
                    <textarea id="noteEditor"></textarea>
                </div>
            </div>
    
            <!--Save and Cancel-->
            <div id="button-div">
                <button class="note-buttons" id="save-note" type="submit">Save</button>
                <button class="note-buttons" id="cancel" type="submit">Cancel</button>
            </div>
    
            <!-- Footer-->
            <footer class="footer text-center">
                <%- include('../../../partials/footer'); %>
            </footer>

            <!-- Copyright Section-->
            <div class="copyright py-4 text-center text-white">
                <%- include('../../../partials/copyright'); %>
            </div>

            <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
            <div class="scroll-to-top d-lg-none position-fixed">
                <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
            </div>

        </div>

        <%- include('../../../partials/jsincludes'); %>
        <%- include ('../gallery/dropdown'); %>

    </body>
    
</html>

<script>  

    //toggles the rendering of more options menu
    const toggleMoreOptions = () => {
        if (document.getElementById('dropdown-content').getAttribute('style')) {
            document.getElementById('dropdown-content').setAttribute('style','');
        } else {
            document.getElementById('dropdown-content').setAttribute('style',"display: block; right: 5%; top: 10%");
        }
    }

    //if file modal is on, it turns off and vice versa
    const toggleFileModal = () => {
      if (document.getElementById('file-display').getAttribute('class') === 'hidden') {
        document.getElementById('file-display').setAttribute('class','file-display-shown');
      } else {
        document.getElementById('file-display').setAttribute('class','hidden');
      } 
    }

    //checks if someone is clicking off modal and then closes it
    $('body').click(function (ev) {
    if (document.getElementById('file-display').getAttribute('class') !== 'hidden') {
        if (ev.target.id !== 'file-display-content' && ev.target.id !== 'show-files' && ev.target.id !== "file-display-name" && ev.target.id !== "file-display-icon" && ev.target.id !== "show-files" && ev.target.id !== 'new-file-icon' && ev.target.id !== 'new-file-coloring') {
            document.getElementById('file-display').setAttribute('class','hidden');
        }
    }
    if (ev.target.id !== 'ellipsis')
        document.getElementById('dropdown-content').setAttribute('style','');
});

</script>

<%- include('./file-display'); %>

